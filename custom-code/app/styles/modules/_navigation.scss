// override background color for all navigation elements
#masthead:after,
#masthead > div > section.hs-primary-navigation,
#masthead > .col-full,
.site-header-cart .widget_shopping_cart,
.main-navigation ul.menu ul.sub-menu,
.main-navigation ul.nav-menu ul.children,
.main-navigation ul ul,
#site-navigation .menu-toggle,
.main-navigation div.menu {
  background-color: $blue !important;
}

#page #site-navigation {
  border-bottom-color: $blue !important;
}

.main-navigation ul.menu ul li,
.main-navigation ul.nav-menu ul li {
  background-color: $blue !important;
}

// remove background from menu buttons
.site-title a,
.site-description,
.secondary-navigation .menu > li > a,
.secondary-navigation .nav-menu > li > a,
.secondary-navigation .nav-menu > li > a:before {
  background-color: $transparent;
  text-shadow: none;
}

.main-navigation ul.menu > li.current-menu-item > a,
.main-navigation ul.nav-menu > li.current_page_item > a,
.main-navigation ul.nav-menu > li:hover > a {
  background-color: $transparent;
  text-shadow: none;
}

// Menu Search
%menu-search {
  .widget_product_search {
    form {
      // Search icon
      &::before {
        left: rem(10);
        color: $gray-dark;
        font-size: rem(16);
      }

      .search-field {
        margin-top: rem(10);
        margin-bottom: rem(10);
        padding-left: rem(34);
        font-size: rem(14);
      }
    }
  }
}

%search-field {
  .search-field {
    height: rem(33);
    letter-spacing: normal;
  }
}

// Upper menu
.hs-header-bar {
  display: flex;
  border: 0;
  background-color: $gray-dark;
  justify-content: flex-end;
  align-items: center;




  // .secondary-navigation > div > ul.menu {
  //   float: right;
  // }

  // .search-field {
  //   height: rem(33);
  // }

  .site-search {
    @extend %menu-search;
    float: none;

    .widget_product_search {
      form {
        @extend %search-field;
      }
    }
  }
}

.secondary-navigation {
  li {
    font-size: rem(14);
  }

  > div {
    > ul {
      &.menu {
        > li {
          margin-right: rem(30);

          > a {
            padding: 0;
            font-size: rem(14);
            font-weight: normal;

            &:hover {
              color: $blue !important;
            }
          }
        }
      }
    }
  }
}

// hide login link when logged-in
.logged-in {
  .view-logged-out {
    display: none;
  }
}

// Mobile bottom menu
.storefront-handheld-footer-bar {
  @extend %search-field;
  @extend %menu-search;
}

.site-search .widget_product_search input[type="search"],
.site-search .widget_product_search input[type="text"] {
  border-radius: 0;
}

#site-navigation {
  background-color: $blue;
}

#site-navigation,
.sp-designer .main-navigation {
  border-bottom: 0;
  margin-top: 0;
}

.main-navigation li.current_page_item {
  @include medium-up() {
    border-bottom: $white rem(2) solid;
  }

  a {
    // color: $gray-dark !important;
    background-color: rgba(255, 255, 255, 0.03);
  }
}

.main-navigation ul.menu > li li a,
.main-navigation ul.nav-menu > li li a {
  padding: rem(10 8);
  text-transform: none;
  color: $white !important;
  font-size: rem(14);
  font-weight: 300;
}

.main-navigation {
  ul {
    ul {
      @include medium-up() {
        // top: 108%;
        // GRC
        top: 106%;

        .woocommerce-page & {
          top: 104%;
          // top: 105%;
        }
      }
    }

    &.menu {
      ul {
        li {
          &:first-child {
            padding-top: rem(11);

            > a {
              @include medium-up() {
                padding-top: rem(10);
              }
            }
          }

          &:last-child {
            // padding-bottom: rem(18);
            // GRC
            padding-bottom: rem(2);

            a > {
              @include medium-up() {
                padding-bottom: rem(10);
              }
            }
          }
        }
      }

      > li {
        @include medium-up() {
          height: rem(39);
        }

        margin-right: rem(18);

        &.menu-item-has-children {
          &:hover {
            > a {
              &::after {
                transform: rotate(180deg);
              }
            }
          }

          > a {
            &::after {
              transition: transform 0.3s;
              color: $white;
            }
          }
        }
      }
    }
  }
}

section.hs-primary-navigation {
  @include medium-up() {
    // GRC
    // border-bottom: $gray-dark solid rem(1);
  }
}

#masthead > .col-full {
  border-left: 0;
  border-right: 0;
}

.woocommerce-active {
  .site-header {
    .site-header-cart {
      @include breakpoint(1064px) {
        right: rem(38);
      }

      .cart-contents {
        &:after {
          line-height: rem(16);
        }
      }
    }

    .site-search {
      float: none;
    }

    .secondary-navigation {
      float: none;
      width: auto;
    }
  }
}

.homestore-homepage-menu {
  h3 {
    &.title {
      &::before {
        color: $blue;
      }
    }
  }
}

// mobile menu
.storefront-handheld-footer-bar,
.storefront-handheld-footer-bar ul li > a,
.storefront-handheld-footer-bar ul li.search .site-search {
  background-color: $blue !important;
}

.storefront-handheld-footer-bar ul li.search .site-search {
  border-bottom: 1px solid rgba(255,255,255,.2);
}

.storefront-2x #site-navigation .menu-toggle,
.storefront #site-navigation .menu-toggle,
button.menu-toggle {
  border: 1px solid rgba(255,255,255,.05);
}

// mouse hover effect on menu items
nav#site-navigation {
  ul.menu>li>a:hover {
    color: $blue-dark !important;
  }
}
.main-navigation ul.menu ul li a:hover,
.main-navigation ul.nav-menu ul li a:hover {
  color: $blue-dark !important;
}

// Mobile nav
#site-navigation {
  ul {
    a {
      @include small-only() {
        text-transform: none;
      }

      font-weight: 300;
    }
  }

  .menu-toggle {
    margin-top: 0;
    border: 0 !important;
    border-radius: 0;

    span {
      display: inline-block;
      overflow: hidden;
      width: 0;
      height: 0;
      color: inherit;
      font-weight: 300;
    }

    &:focus {
      outline-color: $white;
    }
  }
}

// extend the submenu items background to fullwidth
.main-navigation {
  ul {
    &.menu {
      ul {
        &.sub-menu  {
          &::after {
              content: "";
              background-color: $blue;
              display: block;
              // position: absolute;
              width: 200vw;
              height: calc(100% + #{rem(3)});
              transform: translateX(-50%) translateY(-100%);
              margin-top: rem(1);
              z-index: -2;
              // GRC
              border-top: rem(1) rgba($gray-dark, 0.16) solid;
              // box-shadow: 0px -2px 0px 0px $blue;

              @include medium-up() {
                position: absolute;
              }

              .woocommerce-page & {
                margin-top: rem(1);
              }
          }
        }
      }
    }
  }
}

.main-navigation {
  ul {
    &.menu {
      ul {
        li {
          ul {
            &.sub-menu  {
              &::after {
                  content: "";
                  background-color: $blue;
                  display: block;
                  // position: absolute;
                  width: auto;
                  height: calc(100% + 3px);
                  transform: translateX(0%) translateY(calc(-99% + 2px));
                  z-index: -2;

                  // GRC
                  @include medium-up() {
                    position: absolute;
                  }

                  .woocommerce-page & {
                    transform: translateX(0%) translateY(calc(-99% + 1px));
                  }
              }
            }
          }
        }
      }
    }
  }
}

// Override theme styles
.sp-designer {
  .main-navigation {
    ul {
      li {
        a {
          text-transform: uppercase;
          // GRC
          margin-bottom: -1px !important;
        }
      }
    }
  }
}

// Header logo
.site-header {
  .site-branding {
    max-width: rem(262);
    padding-top: rem(22);
    padding-bottom: rem(28);
  }
}

// Contact us link in the mobile nav.
// NOTE: There's no way to add a class to this element
// so we are targeting it through the page id. If the structure of
// the page changes, this class will need to be updated.
.page-item-58 {
  @include small-only() {
    padding-top: rem(23);
    padding-bottom: rem(30);

    a {
      @include button-global();
      @include button-lines()

      position: relative;
      display: inline-block !important;
      text-transform: uppercase !important;
      border: rem(2) solid $white !important;
      line-height: 2.5 !important;

      &:hover {
        @include button-lines-hover()
        background: transparent !important;
      }

      &::before,
      &::after {
        border-color: $white;
      }
    }
  }
}

// mobile header sticky
body.sp-header-sticky {
  @include small-only() {
    #masthead {
       position: fixed;
       width: 100%;
       top: 0;
    }

    #page {
      padding-top: rem(197) !important;
    }
  }
}
